doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title HIS Internaci贸n
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    style.
      body {
        background-color: #dcebf8;
      }
      img.libre {
        filter: hue-rotate(90deg); 
      }
      img.ocupada {
        filter: hue-rotate(0deg); 
      }
      img.higienizando {
        filter: hue-rotate(60deg); 
      }
  
  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.mb-4
      .container-fluid
        a.navbar-brand(href="/") HIS Internaci贸n
        button.navbar-toggler(type="button", data-bs-toggle="collapse", data-bs-target="#navbarNav")
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href="/") Inicio
            li.nav-item
              a.nav-link(href="/admision") Internaciones
            li.nav-item
              a.nav-link(href="/pacientes") Pacientes
            
    main.container
      block content

    #infoModal.modal.fade(tabindex='-1', aria-labelledby='modalTitle', aria-hidden='true')
      .modal-dialog.modal-dialog-centered
        .modal-content
          .modal-header
            h5.modal-title#modalTitle Notificaci贸n del Sistema
            button.btn-close(type='button', data-bs-dismiss='modal', aria-label='Close')
          .modal-body
            p#modalBody
          .modal-footer
            button.btn.btn-primary(type='button', data-bs-dismiss='modal') Entendido

    script.
      document.addEventListener('DOMContentLoaded', function() {
        const modalElement = document.getElementById('infoModal');
        if (modalElement) {
          const infoModal = new bootstrap.Modal(modalElement);
          const modalTitle = document.getElementById('modalTitle');
          const modalBody = document.getElementById('modalBody');
          const modalHeader = modalElement.querySelector('.modal-header');
          
          const errorMessage = `#{error_msg}`;
          const successMessage = `#{success_msg}`;

          if (errorMessage) {
            modalTitle.innerText = 'Error';
            modalHeader.className = 'modal-header bg-danger text-white';
            modalBody.innerText = errorMessage;
            infoModal.show();
          }
          
          if (successMessage) {
            modalTitle.innerText = 'Operaci贸n Exitosa';
            modalHeader.className = 'modal-header bg-success text-white';
            modalBody.innerText = successMessage;
            infoModal.show();
          }
        }
      });

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
    block scripts